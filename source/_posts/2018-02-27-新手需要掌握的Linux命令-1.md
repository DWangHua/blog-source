---
title: 新手需要掌握的Linux命令-1
date: 2018-02-27 17:30:12
tags:
---

# 执行查看帮助命令
常见执行Linux命令的格式是这样的：
```
命令名称 [命令参数] [命令对象]
```
tip: 命令名称、命令参数、命令对象之间要用空格分隔。  
* 命令对象一般是指处理的文件、目录、用户等资源。
* 命令参数可以用长格式（完整的选项名称），也可以用短格式（单个字母的缩写），两者分别用`--`与`-`作为前缀。

格式 | 命令 
---------|----------
 长格式 | man --help
 短格式 | man -h

可以通过`man [命令名称]`的方式来查询帮助信息，以下是man命令中常用按键以及用途：

按键 | 用途 
---------|----------
空格键 | 向下翻一页
Page down | 向下翻一页
Page on | 向上翻一页
home | 前往首页
end | 前往尾页
/ | 从上至下搜索某个关键词，如"/linux"
? | 从下至上搜索某个关键词，如"?linux"
n | 定位到下一个搜索到的关键词
N | 定位到上一个搜索到的关键词
q | 退出帮助文档

man文档的结构：

结构名称 | 代表意义
---------|----------
NAME | 命令的名称
SYNOPSIS | 参数的大致用法
DESCRIPTION | 介绍
EXAMPLES | 举例说明
OVERVIEW | 概述
DEFAULTS | 默认功能
OPTIONS | 具体的可用选线（带说明）
ENVIRONMENT | 环境变量
FILES | 用到的文件
SEE ALSO | 相关资料
HISTORY | 维护历史与联系方式

# 常用系统工作命令

## echo命令
将制定字符串输出到屏幕
```
echo sometext
```
将变量输出到屏幕
```
echo $SHELL
```

## date命令
格式 `date [选项] [+指定的格式]`  
date 命令中的参数以及作用：

参数 | 作用
---------|----------
%t | 跳格（Tab键）
%H | 小时（00~23）
%I | 小时（00~12）
%M | 分钟（00~59）
%S | 秒（00~59）
%j | 今年中的第几天

* 以默认格式查看系统时间 `date`
* 以“年-月-日 小时:分钟:秒”的格式查看系统时间 `date "+%Y-%m-%d %H:%M:%S"`
* 修改当前系统时间 `date -s "20170901 8:30:00"`
* 查看今天是当年中的第几天 `date "+%j"`

## reboot命令
reboot命令用于重启系统（需要root权限）

## poweroff命令
poweroff命令用于关闭系统（需要root权限）

## wget命令
wget 命令用于在终端中下载网络文件，格式为`wget [参数] 下载地址`。  
wget 命令的参数以及作用：

参数 | 作用
---------|----------
-b | 后台下载模式
-P | 下载到指定的目录
-t | 最大尝试次数
-c | 断点续传
-p | 下载页面内所有资源，包括图片、视频等
-r | 递归下载

* 下载整个网站的资源 `wget -r -p http://www.linuxprobe.com` 下载完成会自动保存到当前路径下的```www.linuxprobe.com```目录中。

## ps命令
ps 命令用于查看系统中的进程状态，格式为`ps [参数]`。  
ps 命令的参数以及作用：

参数 | 作用
---------|----------
-a | 显示所有进程（包括其他用户的）
-u | 用户以及其他详细信息
-x | 显示没有控制终端的进程

在Linux系统中有5中常见的进程状态，分别是运行、中断、不可中断、僵死与停止：
* R（运行）：进程正在运行或在运行队列中等待
* S（中断）：进程处于休眠中，当某个条件形成后或者接收到信号时，则脱离该
状态
* D（不可中断）：进程不响应系统异步信号，即便用 kill 命令也不能将其中断
* Z（僵死）：进程已经终止，但进程描述符依然存在, 直到父进程调用 wait4()系统函数后将进程释放
* T（停止）：进程收到停止信号后停止运行
当执行 `ps aux`命令后，显示表格的表头含义：

 英文 | 中文
 ---------|----------
USER | 进程所有者
PID | 进程ID号
%CPU | 运算器占用率
%MEM | 内存占用率
VSZ | 虚拟内存使用量（KB）
RSS | 占用的固定内存量（KB）
TTY | 所在终端
STAT | 进程状态
START | 被启动的时间
TIME | 实际使用CPU的时间
COMMAND | 命令名称与参数

tip: 如前面所提到的，在 Linux 系统中的命令参数有长短格式之分，长格式和长格式之间不能合并，长格式和短格式之间也不能合并，但短格式和短格式之间是可以合并的，
合并后仅保留一个-（减号）即可。另外 ps 命令可允许参数不加减号（-），因此可接
写成 ps aux 的样子。


## top命令
top 命令用于动态地监视进程活动与系统负载等信息，其格式为 `top`。
top 命令能够动态（会自动更新）地查看系统运维状态，可以看做是Linux的“强化版Windows任务管理器”。  
前5行为系统整体的统计信息：  
1. 系统时间、运行时间、登录终端数、系统负载load average（三个数值分别为1分钟、5分钟、15分钟内的平均值，数值越小，负载越低）
2. 进程总数、运行中的进程数running、睡眠中的进程数sleeping、停止的进程数stopped、僵死的进程数zombie
3. 用户占用资源百分比us、系统内核占用资源百分比sy、改变过优先级的进程资源百分比ni、空闲的资源百分比等id、IO等待占用资源的百分比wa、硬中断（Hardware IRQ）占用资源的百分比hi、软中断（Software Interrupts）占用资源的百分比si
4. 物理内存总量、内存使用量、内存空闲量、作为内核缓存的内存量
5. 虚拟内存总量、虚拟内存使用量、虚拟内存空闲量、已被提前加载的内存量

tip: 第三行中的CPU数据均是百分比格式

### 关于硬中断和软中断
[参考](https://www.linuxidc.com/Linux/2014-03/98013.htm)
#### 硬中断
1. 硬中断是由硬件产生的，比如，像磁盘，网卡，键盘，时钟等。每个设备或设备集都有它自己的IRQ（中断请求）。基于IRQ，CPU可以将相应的请求分发到对应的硬件驱动上（注：硬件驱动通常是内核中的一个子程序，而不是一个独立的进程）。

2. 处理中断的驱动是需要运行在CPU上的，因此，当中断产生的时候，CPU会中断当前正在运行的任务，来处理中断。在有多核心的系统上，一个中断通常只能中断一颗CPU（也有一种特殊的情况，就是在大型主机上是有硬件通道的，它可以在没有主CPU的支持下，可以同时处理多个中断。）。

3. 硬中断可以直接中断CPU。它会引起内核中相关的代码被触发。对于那些需要花费一些时间去处理的进程，中断代码本身也可以被其他的硬中断中断。

4. 对于时钟中断，内核调度代码会将当前正在运行的进程挂起，从而让其他的进程来运行。它的存在是为了让调度代码（或称为调度器）可以调度多任务。

#### 软中断
1. 软中断的处理非常像硬中断。然而，它们仅仅是由当前正在运行的进程所产生的。

2. 通常，软中断是一些对I/O的请求。这些请求会调用内核中可以调度I/O发生的程序。对于某些设备，I/O请求需要被立即处理，而磁盘I/O请求通常可以排队并且可以稍后处理。根据I/O模型的不同，进程或许会被挂起直到I/O完成，此时内核调度器就会选择另一个进程去运行。I/O可以在进程之间产生并且调度过程通常和磁盘I/O的方式是相同。

3. 软中断仅与内核相联系。而内核主要负责对需要运行的任何其他的进程进行调度。一些内核允许设备驱动的一些部分存在于用户空间，并且当需要的时候内核也会调度这个进程去运行。

4. 软中断并不会直接中断CPU。也只有当前正在运行的代码（或进程）才会产生软中断。这种中断是一种需要内核为正在运行的进程去做一些事情（通常为I/O）的请求。有一个特殊的软中断是Yield调用，它的作用是请求内核调度器去查看是否有一些其他的进程可以运行。

## pidof命令
pidof 命令用于查询某个指定服务进程的 PID 值，格式为`pidof [参数] [服务名称]`  
每个进程的进程号码值（PID）是唯一的，因此可以通过 PID 来区分不同的进程  
```
pidof sshd
```

## kill命令
kill 命令用于终止某个指定 PID 的服务进程，格式为`kill [参数] [进程 PID]`
```
kill 2156
```

## killall命令
killall 命令用于终止某个指定名称的服务所对应的全部进程，格式为：`killall [参数] [进
程名称]`  
可以使用 killall 命令来批量结束某个服务程序带有的全部进程
```
pidof httpd
<!-- 会返回多个PID -->
killall httpd
pidof httpd
<!-- 没有返回 -->
```

# 参考
《Linux就该这么学》